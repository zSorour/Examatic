---
- name: Firewall rule to enable port 6080 for VNC WebSocket proxy
  win_firewall_rule:
    name: NoVNC Proxy
    localport: 6080
    action: allow
    direction: in
    protocol: tcp
    state: present
    enabled: yes

- name: Install git
  win_chocolatey:
    name: git
    state: present

- name: Make directory for Websockify Proxy
  win_file:
    path: 'C:\novnc'
    state: directory

- name: Download NoVNC
  ansible.windows.win_powershell:
    script: |
      git clone https://github.com/novnc/noVNC 'C:\novnc'

- name: Install latest Python version
  win_chocolatey:
    name: python
    state: present